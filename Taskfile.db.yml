version: '3'

env:
  DB_NAME: realworld_go_kit_db

tasks:
  run:
    cmds:
      - docker run -d
          -p 5432:5432
          -e POSTGRES_PASSWORD=$POSTGRES_PASSWORD
          --name $DB_NAME
          -it $DB_NAME
  build:
    cmds:
      - docker build -t $DB_NAME -f Dockerfile.postgres .
  rebuild:
    cmds:
      - task: stop
      - task: rm
      - task: build
  start:
    cmds:
      - docker start $DB_NAME
  stop:
    cmds:
      - docker stop $DB_NAME
  rm:
    cmds:
      - docker rm $DB_NAME